# =============================================================================
# IdeaBox Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your values.
# NEVER commit .env.local to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Supabase Configuration
# Get these from: https://supabase.com/dashboard/project/_/settings/api
# -----------------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# -----------------------------------------------------------------------------
# Google OAuth Configuration (External app in testing mode)
# Get these from: https://console.cloud.google.com/apis/credentials
# Required scopes: gmail.readonly, gmail.modify, userinfo.email, userinfo.profile
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/callback

# -----------------------------------------------------------------------------
# OpenAI Configuration (GPT-4.1-mini only)
# Get this from: https://platform.openai.com/api-keys
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-api-key

# -----------------------------------------------------------------------------
# App Configuration
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development

# Logging level: debug, info, warn, error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Sync IdeaBox categories as labels in Gmail
ENABLE_GMAIL_LABEL_SYNC=true

# Maximum characters of email body to send to AI (for cost control)
# 16000 chars ~ 4000 tokens ~ $0.0006 per email
MAX_BODY_CHARS=16000

# -----------------------------------------------------------------------------
# Scheduled Sync (Background Email Sync)
# -----------------------------------------------------------------------------
# Secret key for service-to-service authentication between Edge Functions and API
# Generate with: openssl rand -base64 32
INTERNAL_SERVICE_KEY=your-internal-service-key-here

# Secret key for pg_cron to authenticate with Edge Functions
# Generate with: openssl rand -base64 32
CRON_SECRET=your-cron-secret-here

# -----------------------------------------------------------------------------
# Gmail Push Notifications (Real-time Email Sync)
# -----------------------------------------------------------------------------
# Google Cloud Project ID (required for Pub/Sub)
# Get from: https://console.cloud.google.com/
GOOGLE_CLOUD_PROJECT=your-gcp-project-id

# Pub/Sub topic name for Gmail notifications (default: gmail-notifications)
GMAIL_PUBSUB_TOPIC=gmail-notifications

# Path to Google Cloud service account credentials JSON (for local development)
# In production, use workload identity or Supabase secrets
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# -----------------------------------------------------------------------------
# Initial Sync Configuration
# -----------------------------------------------------------------------------
# Maximum emails to analyze during initial onboarding sync
INITIAL_SYNC_MAX_EMAILS=50
